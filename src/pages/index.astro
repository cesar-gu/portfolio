---
import Navigation from '../components/Navigation.vue';
import HeroSection from '../components/HeroSection.vue';
import SkillsShowcase from '../components/SkillsShowcase.vue';
import ExperienceSection from '../components/ExperienceSection.vue';
import EducationSection from '../components/EducationSection.vue';
import Footer from '../components/Footer.vue';
import portfolio from '../data/portfolio.json';

// SEO Meta Tags
const seoTitle = 'César Gutiérrez | Desarrollador Frontend especializado en Angular y Vue';
const seoDescription =
  'Ingeniero informático con 10+ años de experiencia en desarrollo Frontend. Especializado en Angular y Vue. Ubicado en León, España.';
const seoKeywords = [
  'Frontend Developer',
  'Angular',
  'Vue.js',
  'TypeScript',
  'Web Development',
  'César Gutiérrez',
  'León',
].join(', ');

// Sort experiences by date (most recent first)
const sortedExperiences = [...portfolio.work].sort(
  (a, b) => new Date(b.startDate).getTime() - new Date(a.startDate).getTime()
);

// Sort education by date (most recent first)
const sortedEducation = [...portfolio.education].sort(
  (a, b) => parseInt(b.startDate) - parseInt(a.startDate)
);
---

<!doctype html>
<html lang="es">
  <head>
    <!-- Meta Tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />

    <!-- SEO -->
    <title>{seoTitle}</title>
    <meta name="description" content={seoDescription} />
    <meta name="keywords" content={seoKeywords} />
    <meta name="author" content="César Gutiérrez" />
    <meta name="robots" content="index, follow" />

    <!-- Canonical -->
    <link rel="canonical" href="https://cesar-gu.github.io/portfolio" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={seoTitle} />
    <meta property="og:description" content={seoDescription} />
    <meta property="og:image" content="https://cesar-gu.github.io/portfolio/images/profile.webp" />
    <meta property="og:url" content="https://cesar-gu.github.io/portfolio" />
    <meta property="og:site_name" content="César Gutiérrez Portfolio" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={seoTitle} />
    <meta name="twitter:description" content={seoDescription} />
    <meta name="twitter:image" content="https://cesar-gu.github.io/portfolio/images/profile.webp" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/portfolio/favicon.svg" />

    <!-- Styles -->
    <style is:global>
      @import 'tailwindcss/base';
      @import 'tailwindcss/components';
      @import 'tailwindcss/utilities';

      html {
        scroll-behavior: smooth;
      }

      body {
        background-color: #ffffff;
        color: #1f2937;
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell',
          'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
      }

      ::selection {
        background-color: #0066cc;
        color: white;
      }
    </style>
  </head>

  <body class="antialiased">
    <!-- Navigation -->
    <Navigation client:load basics={portfolio.basics} />

    <!-- Hero Section -->
    <HeroSection client:load basics={portfolio.basics} />

    <!-- Skills Section -->
    <SkillsShowcase client:load skills={portfolio.skills} expertise={portfolio.expertise} />

    <!-- Experience Section -->
    <ExperienceSection
      client:load
      experiences={sortedExperiences}
      knownTechs={portfolio.knownTechs}
    />

    <!-- Education Section -->
    <EducationSection client:load education={sortedEducation} trainings={portfolio.trainings} />

    <!-- Footer -->
    <Footer client:load basics={portfolio.basics} />

    <!-- AOS Library for Animations on Scroll -->
    <script is:inline>
      // Load AOS library
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = 'https://unpkg.com/aos@2.3.4/dist/aos.css';
      document.head.appendChild(link);

      const script = document.createElement('script');
      script.src = 'https://unpkg.com/aos@2.3.4/dist/aos.js';
      script.onload = () => {
        AOS.init({
          duration: 600,
          easing: 'ease-in-out-cubic',
          once: true,
          mirror: false,
          offset: 80,
        });
      };
      document.body.appendChild(script);
    </script>

    <!-- Schema.org Structured Data -->
    <script
      type="application/ld+json"
      is:inline
      set:html={JSON.stringify({
        '@context': 'https://schema.org',
        '@type': 'Person',
        name: 'César Gutiérrez',
        jobTitle: 'Desarrollador Frontend',
        image: 'https://cesar-gu.github.io/portfolio/images/profile.webp',
        email: 'cesargupe95@gmail.com',
        url: 'https://cesar-gu.github.io/portfolio',
        sameAs: [
          'https://www.linkedin.com/in/cesargupe/',
          'https://github.com/cesar-gu',
          'https://gitlab.com/cesargupe',
        ],
        location: {
          '@type': 'Place',
          name: 'León, Spain',
        },
        description:
          'Ingeniero informático con 10+ años de experiencia en desarrollo Frontend. Especializado en Angular y Vue.',
      })}
    />
  </body>
</html>
